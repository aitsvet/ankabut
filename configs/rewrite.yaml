script: rewrite.py
index: data/cryptosarf/crypto-snow.faiss
title: Криптовалюта как исламский финансовый инструмент
prompts:
  embed:
    window_size: 0
    max_samples: 20
    model: snowflake-arctic-embed2:latest
  rewrite_paragraph:
    model: rscr/ruadapt_qwen2.5_32b:Q4_K_M
    max_tokens: 32768
    template: |

      Перед тобой следующий черновик обзорной статьи, уже отредактированный от начала и до целевого раздела.

      {draft}
    
      Перепиши текст приведённого ниже раздела, сохранив объём текста.

      Раздел может использовать информацию из приведённых ниже отрывков исходных статей (до маркера <<ИНСТРУКЦИИ>>):

      {sources}

      <<ИНСТРУКЦИИ>>

      Нужно использовать информацию из приведённых выше отрывков исходных статей, но повторять предложения или фразы нельзя.
    
      Перепиши текст приведённого ниже раздела, сохранив объём текста.

      Замени в нём все китайские и английские слова на русские аналоги. Сделай текст более связным, сохранив смысл.

      Удали дубли по смыслу между разделами, каждый факт или мнение приведи в тексте только один раз.

      Обязательно сохрани номера ссылок из списка литературы в квадратных скобках в каждом разделе текста.

      Используй в каждом разделе те же самые сслыки (номера в квадратных скобках), которые даны в первоначальном тексте.

      Перепиши текст только одного приведённого ниже раздела, не включая в ответ какие-либо другие разделы.

      {paragraph}
  write_paragraph:
    model: rscr/ruadapt_qwen2.5_32b:Q4_K_M
    max_tokens: 32768
    template: |

      Перед тобой следующий черновик обзорной статьи.

      {source}
    
      Напиши раздел {title} - не менее 500 слов и не более 1000 слов.
      
      Сделай текст связным в соответствии со смыслом всей статьи.

      Не повторяй смысл других разделов, каждый факт или мнение приведи в тексте только один раз.
